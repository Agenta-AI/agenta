# Check for changes in the frontend directory (agenta-web/) in the files being pushed
if git diff --name-only --cached origin/$(git rev-parse --abbrev-ref HEAD) | grep -q '^agenta-web/'; then
    cd agenta-web || exit

    # Run ESLint check
    if ! npm run lint; then
        echo 'âŒ ESLint issues detected. Please fix them before committing.'
        exit 1
    else
        echo 'âœ… ESLint check passed.'
    fi

    # Run TypeScript type check
    if ! npm run types:check; then
        echo 'âŒ TypeScript type errors detected. Please fix them before pushing the code.'
        exit 1
    else
        echo 'âœ… TypeScript type check passed.'
    fi

    echo 'ğŸ‰ All checks passed. Ready to push!'
fi

# Check for changes in the frontend directory (agenta-backend/) in the files being pushed
if git diff --name-only --cached origin/$(git rev-parse --abbrev-ref HEAD) | grep -q '^agenta-backend/'; then
    cd agenta-backend || exit

    # Run pylint for linting
    echo 'ğŸ” Running pylint...'
    if ! pylint $(git diff --cached --name-only | grep '\.py$'); then
        echo 'âŒ pylint issues detected. Please fix them before pushing the code.'
        exit 1
    else
        echo 'âœ… pylint check passed.'
    fi

    echo 'ğŸ‰ Backend checks passed. Ready to push!'
fi